{% extends 'base.html.twig' %}

{% block title %}
    Settings - App
{% endblock %}

{% block body %}
    <main role="main" class="container">
        {{ include('component/navbar.html.twig') }}

        <div style="text-align: center;">
            {{ include('component/settings-nav.html.twig') }}

            <div style="padding-bottom: 1rem;padding-top: 1rem">
                <h5 style="margin-bottom: 1rem;">About</h5>
                <p>
                    <span class="text-{{ theme == 'dark' ? 'light' : 'dark' }} theme-text-color">Version:</span> <span class="fw-light">{{ currentApplicationVersion }}</span>

                    {% if latestRelease is empty %}
                        {% set badgeStyle = 'text-bg-secondary' %}
                        {% set badgeText = 'Latest version unkown' %}
                    {% else %}
                        {% set badgeStyle = (currentApplicationVersion != latestRelease.name) ? 'text-bg-warning' : 'text-bg-success' %}
                        {% set badgeText = (currentApplicationVersion != latestRelease.name) ? 'Update available' : 'Up to date' %}
                    {% endif %}

                    <a
                            href="https://github.com/leepeuker/movary/releases"
                            class="badge rounded-pill {{ badgeStyle }}"
                            target="_blank"
                            style="text-decoration-line:none">
                        {{ badgeText }}
                    </a>
                </p>
                <p>
                    <span class="text-{{ theme == 'dark' ? 'light' : 'dark' }} theme-text-color">Timezone:</span>
                    <span class="fw-light">{{ timeZone }}</span>
                </p>

                <hr>

                <h5 style="margin-bottom: 1rem;">Getting Support</h5>
                <p>
                    <span class="text-{{ theme == 'dark' ? 'light' : 'dark' }} theme-text-color">Github:</span>
                    <a class="fw-light" href="https://github.com/leepeuker/movary/issues" target="_blank">leepeuker/movary</a>
                </p>
                <p>
                    <span class="text-{{ theme == 'dark' ? 'light' : 'dark' }} theme-text-color">Matrix:</span>
                    <a class="fw-light" href="https://element.leepeuker.dev/#/room/#movary-support:leepeuker.dev" target="_blank">#movary-support:leepeuker.dev</a>
                </p>
                <p>
                    <span class="text-{{ theme == 'dark' ? 'light' : 'dark' }} theme-text-color">Reddit:</span>
                    <a class="fw-light" href="https://www.reddit.com/r/movary/" target="_blank">/r/movary</a>
                </p>

                <hr>

                <h5 style="margin-bottom: 1rem;">Latest Releases</h5>
                <ul class="list-group">
                    {% set hastLatest = false %}
                    {% for release in releases %}
                        <li class="list-group-item">
                            <span class="text-{{ theme == 'dark' ? 'light' : 'dark' }}">{{ release.name }}</span>
                            {% if hastLatest == false %}<span class="badge rounded-pill text-bg-success">Latest</span>{% endif %}
                            {% if (releases is not empty and currentApplicationVersion == release.name) %}<span class="badge rounded-pill text-bg-primary">Current</span>{% endif %}

                            {% set hastLatest = true %}
                        </li>
                    {% endfor %}
                    <li class="list-group-item">
                        <span class="text-{{ theme == 'dark' ? 'light' : 'dark' }}">More...</span>
                    </li>
                </ul>
            </div>
        </div>
    </main>
{% endblock %}
