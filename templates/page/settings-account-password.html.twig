{% extends 'base.html.twig' %}

{% block title %}
    Settings - Account
{% endblock %}

{% block body %}
    <main role="main" class="container">
        {{ include('component/navbar.html.twig') }}

        <div style="text-align: center;">
            {{ include('component/settings-nav.html.twig') }}

            <h5 style="margin-top: 1rem">Change password</h5>
            <p class="text-muted">Must be at least 8 characters long.</p>
            <form action="/settings/account/password" method="post">
                <div class="input-group mb-3">
                    <input type="password" class="form-control" name="currentPassword" placeholder="Current password" required
                           {% if coreAccountChangesDisabled == true %}disabled{% endif %}
                           style="margin-left: 5%;margin-right: 5%;;text-align: center;">
                </div>

                <div class="input-group mb-3">
                    <input type="password" class="form-control" name="newPassword" placeholder="New password" required minlength="8"
                           {% if coreAccountChangesDisabled == true %}disabled{% endif %}
                           style="margin-left: 5%;margin-right: 5%;;text-align: center;">
                </div>

                <div class="input-group mb-3">
                    <input type="password" class="form-control" name="newPasswordRepeat" placeholder="Repeat password" required minlength="8"
                           {% if coreAccountChangesDisabled == true %}disabled{% endif %}
                           style="margin-left: 5%;margin-right: 5%;;text-align: center;">
                </div>

                {% if passwordErrorNotEqual == true %}
                    <div class="alert alert-danger alert-dismissible" role="alert" style="margin-left: 5%;margin-right: 5%;margin-bottom: 0.7rem!important;">
                        Passwords were not equal.
                        <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
                    </div>
                {% endif %}
                {% if passwordErrorMinLength == true %}
                    <div class="alert alert-danger alert-dismissible" role="alert" style="margin-left: 5%;margin-right: 5%;margin-bottom: 0.7rem!important;">
                        Password must be at least {{ passwordErrorMinLength }} characters long.
                        <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
                    </div>
                {% endif %}
                {% if passwordErrorCurrentInvalid == true %}
                    <div class="alert alert-danger alert-dismissible" role="alert" style="margin-left: 5%;margin-right: 5%;margin-bottom: 0.7rem!important;">
                        Current password is not correct.
                        <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
                    </div>
                {% endif %}
                {% if passwordUpdated == true %}
                    <div class="alert alert-success alert-dismissible" role="alert" style="margin-left: 5%;margin-right: 5%;margin-bottom: 0.7rem!important;">
                        Password was updated.
                        <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
                    </div>
                {% endif %}
                <button class="btn btn-primary" type="submit" {% if coreAccountChangesDisabled == true %}disabled{% endif %}>Submit</button>
            </form>
        </div>
    </main>
{% endblock %}
